---

ansible-navigator:
  playbook-artifact:
    save-as: "runs/{playbook_name}-{time_stamp}.json"

  ansible-runner:
    artifact-dir: runs
    rotate-artifacts-count: 3

  logging:
    level: debug
    append: False

  ansible:
    inventory:
      entries:
        - inventory.yml

  execution-environment:
    enabled: True
    environment-variables:
      pass:
        - CDP_ACCESS_KEY_ID
        - CDP_PRIVATE_KEY
        - AWS_ACCESS_KEY_ID
        - AWS_SECRET_ACCESS_KEY
        - AWS_SESSION_TOKEN
      set:
        ANSIBLE_CALLBACK_WHITELIST: "ansible.posix.profile_tasks"
        ANSIBLE_GATHERING: "smart"
        ANSIBLE_DEPRECATION_WARNINGS: False
        ANSIBLE_HOST_KEY_CHECKING: False
        ANSIBLE_SSH_RETRIES: 10
        ANSIBLE_SSH_CONTROL_PATH: "/dev/shm/cp%%h-%%p-%%r"
    image: ghcr.io/cloudera-labs/cldr-runner-aws:latest
    pull:
      policy: missing
    container-options:
      - "--network=host"
